{"ast":null,"code":"'use strict';\n\nconst fs = require('graceful-fs');\n\nconst path = require('path');\n\nconst copy = require('../copy').copy;\n\nconst remove = require('../remove').remove;\n\nconst mkdirp = require('../mkdirs').mkdirp;\n\nconst pathExists = require('../path-exists').pathExists;\n\nconst stat = require('../util/stat');\n\nfunction move(src, dest, opts, cb) {\n  if (typeof opts === 'function') {\n    cb = opts;\n    opts = {};\n  }\n\n  const overwrite = opts.overwrite || opts.clobber || false;\n  stat.checkPaths(src, dest, 'move', opts, (err, stats) => {\n    if (err) return cb(err);\n    const {\n      srcStat,\n      isChangingCase = false\n    } = stats;\n    stat.checkParentPaths(src, srcStat, dest, 'move', err => {\n      if (err) return cb(err);\n      if (isParentRoot(dest)) return doRename(src, dest, overwrite, isChangingCase, cb);\n      mkdirp(path.dirname(dest), err => {\n        if (err) return cb(err);\n        return doRename(src, dest, overwrite, isChangingCase, cb);\n      });\n    });\n  });\n}\n\nfunction isParentRoot(dest) {\n  const parent = path.dirname(dest);\n  const parsedPath = path.parse(parent);\n  return parsedPath.root === parent;\n}\n\nfunction doRename(src, dest, overwrite, isChangingCase, cb) {\n  if (isChangingCase) return rename(src, dest, overwrite, cb);\n\n  if (overwrite) {\n    return remove(dest, err => {\n      if (err) return cb(err);\n      return rename(src, dest, overwrite, cb);\n    });\n  }\n\n  pathExists(dest, (err, destExists) => {\n    if (err) return cb(err);\n    if (destExists) return cb(new Error('dest already exists.'));\n    return rename(src, dest, overwrite, cb);\n  });\n}\n\nfunction rename(src, dest, overwrite, cb) {\n  fs.rename(src, dest, err => {\n    if (!err) return cb();\n    if (err.code !== 'EXDEV') return cb(err);\n    return moveAcrossDevice(src, dest, overwrite, cb);\n  });\n}\n\nfunction moveAcrossDevice(src, dest, overwrite, cb) {\n  const opts = {\n    overwrite,\n    errorOnExist: true\n  };\n  copy(src, dest, opts, err => {\n    if (err) return cb(err);\n    return remove(src, cb);\n  });\n}\n\nmodule.exports = move;","map":{"version":3,"sources":["/home/carlos/Documents/Software3/FrontendProyectoSoftware3/node_modules/fs-extra/lib/move/move.js"],"names":["fs","require","path","copy","remove","mkdirp","pathExists","stat","move","src","dest","opts","cb","overwrite","clobber","checkPaths","err","stats","srcStat","isChangingCase","checkParentPaths","isParentRoot","doRename","dirname","parent","parsedPath","parse","root","rename","destExists","Error","code","moveAcrossDevice","errorOnExist","module","exports"],"mappings":"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","sourcesContent":["'use strict'\n\nconst fs = require('graceful-fs')\nconst path = require('path')\nconst copy = require('../copy').copy\nconst remove = require('../remove').remove\nconst mkdirp = require('../mkdirs').mkdirp\nconst pathExists = require('../path-exists').pathExists\nconst stat = require('../util/stat')\n\nfunction move (src, dest, opts, cb) {\n  if (typeof opts === 'function') {\n    cb = opts\n    opts = {}\n  }\n\n  const overwrite = opts.overwrite || opts.clobber || false\n\n  stat.checkPaths(src, dest, 'move', opts, (err, stats) => {\n    if (err) return cb(err)\n    const { srcStat, isChangingCase = false } = stats\n    stat.checkParentPaths(src, srcStat, dest, 'move', err => {\n      if (err) return cb(err)\n      if (isParentRoot(dest)) return doRename(src, dest, overwrite, isChangingCase, cb)\n      mkdirp(path.dirname(dest), err => {\n        if (err) return cb(err)\n        return doRename(src, dest, overwrite, isChangingCase, cb)\n      })\n    })\n  })\n}\n\nfunction isParentRoot (dest) {\n  const parent = path.dirname(dest)\n  const parsedPath = path.parse(parent)\n  return parsedPath.root === parent\n}\n\nfunction doRename (src, dest, overwrite, isChangingCase, cb) {\n  if (isChangingCase) return rename(src, dest, overwrite, cb)\n  if (overwrite) {\n    return remove(dest, err => {\n      if (err) return cb(err)\n      return rename(src, dest, overwrite, cb)\n    })\n  }\n  pathExists(dest, (err, destExists) => {\n    if (err) return cb(err)\n    if (destExists) return cb(new Error('dest already exists.'))\n    return rename(src, dest, overwrite, cb)\n  })\n}\n\nfunction rename (src, dest, overwrite, cb) {\n  fs.rename(src, dest, err => {\n    if (!err) return cb()\n    if (err.code !== 'EXDEV') return cb(err)\n    return moveAcrossDevice(src, dest, overwrite, cb)\n  })\n}\n\nfunction moveAcrossDevice (src, dest, overwrite, cb) {\n  const opts = {\n    overwrite,\n    errorOnExist: true\n  }\n  copy(src, dest, opts, err => {\n    if (err) return cb(err)\n    return remove(src, cb)\n  })\n}\n\nmodule.exports = move\n"]},"metadata":{},"sourceType":"script"}